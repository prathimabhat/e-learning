{% extends 'staff_template/base_template.html' %}
{% block page_title %}
<input type=button value="&#129128" onClick="javascript:history.go(-1);" style="border: none; color:none;">
Take Attendance
{% endblock page_title %}
{% block main_content %}
    <!-- Main content -->

      <br>
      <section class="content">
          <form role="form" action="/staff_add_result" method="post">
               {% csrf_token %}
      <div class="container-fluid">
          <div class="row">
              <div class="col-md-4">


                <h4>Select Class </h4>
                <select  class="form-control" name="course">
                  {% for session_year in session_years %}
                  <option value="{{ session_year.id }}" id="session_year">{{ session_year.session_start_year }} TO {{ session_year.session_end_year }}</option>
                  {% endfor %}
                </select>
              </div>
          </div>
      </div>
        <br><br><br><br><br><br><br><br><br><br><br><br>
      <div>

        <button class="btn btn-primary" id="fetch_class" type="button">Submit</button>
      </div>
       <div id="class_data" class="card-footer">

                </div>
          </form>
    </section>



    <!-- /.content -->
{% endblock main_content %}
{% block custom_js %}
<script>
    $(document).ready(function(){
        $("#fetch_class").click(function(){
            var session_year=$("#session_year").val()

            $.ajax({
                url:'{% url 'get_class' %}',
                type:'POST',
                data:{session_year:session_year},
            })
            .done(function(response){
                var json_data=JSON.parse(response);
                console.log(json_data)
                var div_data="<div class='form-group'><label>Select Class</label><select class='class_list form-control' name='class_list'>";
                for(key in json_data)
                {
                    
                    div_data+="<option value='"+json_data[key]['id']+"' name='class_name'> "+json_data[key]['name']+"</option>";
                }
                div_data+="</select>";
                div_data+="</div>";
                div_data+="<div class='form-group'><div class='row'>"
                div_data+="<div class='col-lg-6'>";

                div_data+="<div class='form-group'>";
                div_data+="<button id='get_subject' class='btn btn-success btn-block' type='submit'>submit</button>";
                div_data+="</div>";

                $("#class_data").html(div_data);

            })
            .fail(function(){
                alert("Error in Fetching Class")
            });
            
        });
    })

</script>
{% endblock custom_js %}